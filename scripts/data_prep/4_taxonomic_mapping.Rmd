---
title: "Map Birdlife and eBird taxonomy to Jetz"
output: html_notebook
bibliography: ../ref.bib 
---

```{r}
source('../env.R')
```

We map to Jetz as our working taxonomy to allow us to use a clade tree.

# Map Birdlife and eBird

## Compare missing species
Read in Birdlife
```{r}
birdlife_tax = read_csv(filename(BIRDLIFE_WORKING_OUTPUT_DIR, 'taxonomy.csv'))
names(birdlife_tax) = c('birdlife_id', 'species_name', 'birdlife_common_name', 'alternative_name')
head(birdlife_tax)
```

Read in eBird
```{r}
ebird_tax = read_csv(filename(EBIRD_WORKING_OUTPUT_DIR, 'taxonomy.csv'))
names(ebird_tax) = c('ebird_id', 'ebird_category', 'ebird_species_name', 'ebird_common_name')
head(ebird_tax)
```
First create the root species name for all ebird records
```{r}
ebird_tax$species_name = word(ebird_tax$ebird_species_name, 1, 2, sep = ' ')
head(ebird_tax)
```

Species in eBird but not Birdlife
```{r}
ebird_tax[!(ebird_tax$species_name %in% birdlife_tax$species_name),]
```

Species in Birdlife but not eBird
```{r}
birdlife_tax[!(birdlife_tax$species_name %in% ebird_tax$species_name),]
```

Trying using Birdlife alternative name for renaming species
```{r}
birdlife_species_name_not_in_ebird = birdlife_tax[!(birdlife_tax$species_name %in% ebird_tax$species_name),]
birdlife_species_name_not_in_ebird[!(birdlife_species_name_not_in_ebird$alternative_name %in% ebird_tax$species_name),]
```

## Build initial taxonomy mapping with straight forward species
```{r}
ebird_birdlife_taxonomy_mapping = inner_join(
  birdlife_tax[, c('species_name', 'birdlife_id', 'birdlife_common_name')], 
  ebird_tax[, c('species_name', 'ebird_id', 'ebird_common_name', 'ebird_species_name')]
)
head(ebird_birdlife_taxonomy_mapping)
```

```{r}
mapped_by_alternative_name = inner_join(
  birdlife_species_name_not_in_ebird[, c('species_name', 'birdlife_id', 'birdlife_common_name', 'alternative_name')], 
  ebird_tax[, c('species_name', 'ebird_id', 'ebird_common_name', 'ebird_species_name')],
  by = c('alternative_name' = 'species_name')
)
mapped_by_alternative_name
```

```{r}
ebird_birdlife_taxonomy_mapping = rbind(
  ebird_birdlife_taxonomy_mapping,
  mapped_by_alternative_name[,c('species_name', 'birdlife_id', 'birdlife_common_name', 'ebird_id', 'ebird_common_name', 'ebird_species_name')]
)
```


## Species left to map
Species missing in Birdlife
```{r}
birdlife_tax[!(birdlife_tax$species_name %in% ebird_birdlife_taxonomy_mapping$species_name),]
```

Species missing in eBird
```{r}
ebird_tax[!(ebird_tax$ebird_species_name %in% ebird_birdlife_taxonomy_mapping$ebird_species_name),]
```

### Birdlife
Extinct Birdlife species

* Nesoenas duboisi

Absent in eBird

* Leptotila battyi: endemic to Panama, no records on eBird of this species or any Leptotila species in Panama.

Spilopelia suratensis

* https://avibase.bsc-eoc.org/species.jsp?lang=EN&avibaseid=AEF9E7D341798053
* https://ebird.org/species/spodov
* http://datazone.birdlife.org/species/factsheet/western-spotted-dove-spilopelia-suratensis

```{r}
birdlife_spilopelia_suratensis = cbind(
  ebird_tax[ebird_tax$ebird_species_name == 'Spilopelia chinensis',c('ebird_id', 'ebird_species_name', 'ebird_common_name')],
  birdlife_tax[birdlife_tax$species_name == 'Spilopelia suratensis', c('birdlife_id', 'species_name', 'birdlife_common_name')]
)
ebird_birdlife_taxonomy_mapping = rbind(ebird_birdlife_taxonomy_mapping, birdlife_spilopelia_suratensis)
birdlife_spilopelia_suratensis
```

Patagioenas albipennis

* https://avibase.bsc-eoc.org/species.jsp?lang=EN&avibaseid=9DAE75390A64BCF5
* http://datazone.birdlife.org/species/factsheet/white-winged-pigeon-patagioenas-albipennis
* https://ebird.org/species/spwpig3/

```{r}
birdlife_patagioenas_albipennis = cbind(
  ebird_tax[ebird_tax$ebird_species_name == 'Spilopelia chinensis',c('ebird_id', 'ebird_species_name', 'ebird_common_name')],
  birdlife_tax[birdlife_tax$species_name == 'Patagioenas albipennis', c('birdlife_id', 'species_name', 'birdlife_common_name')]
)
ebird_birdlife_taxonomy_mapping = rbind(ebird_birdlife_taxonomy_mapping, birdlife_patagioenas_albipennis)
birdlife_patagioenas_albipennis
```

Patagioenas albilinea

* https://avibase.bsc-eoc.org/species.jsp?lang=EN&avibaseid=975A928B4D624F19
* http://datazone.birdlife.org/species/factsheet/southern-band-tailed-pigeon-patagioenas-albilinea
* https://ebird.org/species/batpig1/
```{r}
birdlife_patagioenas_albilinea = cbind(
  ebird_tax[ebird_tax$ebird_species_name == 'Patagioenas fasciata',c('ebird_id', 'ebird_species_name', 'ebird_common_name')],
  birdlife_tax[birdlife_tax$species_name == 'Patagioenas albilinea', c('birdlife_id', 'species_name', 'birdlife_common_name')]
)
ebird_birdlife_taxonomy_mapping = rbind(ebird_birdlife_taxonomy_mapping, birdlife_patagioenas_albilinea)
birdlife_patagioenas_albilinea
```
Alopecoenas hoedtii

* https://avibase.bsc-eoc.org/species.jsp?lang=EN&avibaseid=CD21DBC9B8F0385B
* https://ebird.org/species/wegdov1/

```{r}
birdlife_alopecoenas_hoedtii = cbind(
  ebird_tax[ebird_tax$ebird_species_name == 'Pampusana hoedtii',c('ebird_id', 'ebird_species_name', 'ebird_common_name')],
  birdlife_tax[birdlife_tax$species_name == 'Alopecoenas hoedtii', c('birdlife_id', 'species_name', 'birdlife_common_name')]
)
ebird_birdlife_taxonomy_mapping = rbind(ebird_birdlife_taxonomy_mapping, birdlife_alopecoenas_hoedtii)
birdlife_alopecoenas_hoedtii
```
Alopecoenas jobiensis

* https://avibase.bsc-eoc.org/species.jsp?lang=EN&avibaseid=CD21DBC9B8F0385B
* https://ebird.org/species/wegdov1/

```{r}
birdlife_alopecoenas_hoedtii = cbind(
  ebird_tax[ebird_tax$ebird_species_name == 'Pampusana hoedtii',c('ebird_id', 'ebird_species_name', 'ebird_common_name')],
  birdlife_tax[birdlife_tax$species_name == 'Alopecoenas hoedtii', c('birdlife_id', 'species_name', 'birdlife_common_name')]
)
ebird_birdlife_taxonomy_mapping = rbind(ebird_birdlife_taxonomy_mapping, birdlife_alopecoenas_hoedtii)
birdlife_alopecoenas_hoedtii
```

Alopecoenas jobiensis
```{r}
birdlife_alopecoenas_jobiensis = cbind(
  ebird_tax[ebird_tax$ebird_species_name == 'Pampusana jobiensis',c('ebird_id', 'ebird_species_name', 'ebird_common_name')],
  birdlife_tax[birdlife_tax$species_name == 'Alopecoenas jobiensis', c('birdlife_id', 'species_name', 'birdlife_common_name')]
)
ebird_birdlife_taxonomy_mapping = rbind(ebird_birdlife_taxonomy_mapping, birdlife_alopecoenas_jobiensis)
birdlife_alopecoenas_jobiensis
```
Alopecoenas kubaryi
```{r}
birdlife_alopecoenas_kubaryi = cbind(
  ebird_tax[ebird_tax$ebird_species_name == 'Pampusana kubaryi',c('ebird_id', 'ebird_species_name', 'ebird_common_name')],
  birdlife_tax[birdlife_tax$species_name == 'Alopecoenas kubaryi', c('birdlife_id', 'species_name', 'birdlife_common_name')]
)
ebird_birdlife_taxonomy_mapping = rbind(ebird_birdlife_taxonomy_mapping, birdlife_alopecoenas_kubaryi)
birdlife_alopecoenas_kubaryi
```
Alopecoenas xanthonurus
```{r}
birdlife_alopecoenas_xanthonurus = cbind(
  ebird_tax[ebird_tax$ebird_species_name == 'Pampusana xanthonura',c('ebird_id', 'ebird_species_name', 'ebird_common_name')],
  birdlife_tax[birdlife_tax$species_name == 'Alopecoenas xanthonurus', c('birdlife_id', 'species_name', 'birdlife_common_name')]
)
ebird_birdlife_taxonomy_mapping = rbind(ebird_birdlife_taxonomy_mapping, birdlife_alopecoenas_xanthonurus)
birdlife_alopecoenas_xanthonurus
```
Alopecoenas erythropterus
```{r}
birdlife_alopecoenas_erythropterus = cbind(
  ebird_tax[ebird_tax$ebird_species_name == 'Pampusana erythroptera',c('ebird_id', 'ebird_species_name', 'ebird_common_name')],
  birdlife_tax[birdlife_tax$species_name == 'Alopecoenas erythropterus', c('birdlife_id', 'species_name', 'birdlife_common_name')]
)
ebird_birdlife_taxonomy_mapping = rbind(ebird_birdlife_taxonomy_mapping, birdlife_alopecoenas_erythropterus)
birdlife_alopecoenas_erythropterus
```
Alopecoenas rubescens
```{r}
birdlife_alopecoenas_rubescens = cbind(
  ebird_tax[ebird_tax$ebird_species_name == 'Pampusana rubescens',c('ebird_id', 'ebird_species_name', 'ebird_common_name')],
  birdlife_tax[birdlife_tax$species_name == 'Alopecoenas rubescens', c('birdlife_id', 'species_name', 'birdlife_common_name')]
)
ebird_birdlife_taxonomy_mapping = rbind(ebird_birdlife_taxonomy_mapping, birdlife_alopecoenas_rubescens)
birdlife_alopecoenas_rubescens
```
Alopecoenas beccarii	
```{r}
birdlife_alopecoenas_beccarii = cbind(
  ebird_tax[ebird_tax$ebird_species_name == 'Pampusana beccarii',c('ebird_id', 'ebird_species_name', 'ebird_common_name')],
  birdlife_tax[birdlife_tax$species_name == 'Alopecoenas beccarii', c('birdlife_id', 'species_name', 'birdlife_common_name')]
)
ebird_birdlife_taxonomy_mapping = rbind(ebird_birdlife_taxonomy_mapping, birdlife_alopecoenas_beccarii)
birdlife_alopecoenas_beccarii
```
Alopecoenas johannae	
```{r}
birdlife_alopecoenas_johannae = cbind(
  ebird_tax[ebird_tax$ebird_species_name == 'Pampusana beccarii [johannae Group]', c('ebird_id', 'ebird_species_name', 'ebird_common_name')],
  birdlife_tax[birdlife_tax$species_name == 'Alopecoenas johannae', c('birdlife_id', 'species_name', 'birdlife_common_name')]
)
ebird_birdlife_taxonomy_mapping = rbind(ebird_birdlife_taxonomy_mapping, birdlife_alopecoenas_johannae)
birdlife_alopecoenas_johannae
```
Alopecoenas canifrons
```{r}
birdlife_alopecoenas_canifrons = cbind(
  ebird_tax[ebird_tax$ebird_species_name == 'Pampusana canifrons', c('ebird_id', 'ebird_species_name', 'ebird_common_name')],
  birdlife_tax[birdlife_tax$species_name == 'Alopecoenas canifrons', c('birdlife_id', 'species_name', 'birdlife_common_name')]
)
ebird_birdlife_taxonomy_mapping = rbind(ebird_birdlife_taxonomy_mapping, birdlife_alopecoenas_canifrons)
birdlife_alopecoenas_canifrons
```

Alopecoenas sanctaecrucis
```{r}
birdlife_alopecoenas_sanctaecrucis = cbind(
  ebird_tax[ebird_tax$ebird_species_name == 'Pampusana sanctaecrucis', c('ebird_id', 'ebird_species_name', 'ebird_common_name')],
  birdlife_tax[birdlife_tax$species_name == 'Alopecoenas sanctaecrucis', c('birdlife_id', 'species_name', 'birdlife_common_name')]
)
ebird_birdlife_taxonomy_mapping = rbind(ebird_birdlife_taxonomy_mapping, birdlife_alopecoenas_sanctaecrucis)
birdlife_alopecoenas_sanctaecrucis
```

Alopecoenas stairi
```{r}
birdlife_alopecoenas_stairi = cbind(
  ebird_tax[ebird_tax$ebird_species_name == 'Pampusana stairi', c('ebird_id', 'ebird_species_name', 'ebird_common_name')],
  birdlife_tax[birdlife_tax$species_name == 'Alopecoenas stairi', c('birdlife_id', 'species_name', 'birdlife_common_name')]
)
ebird_birdlife_taxonomy_mapping = rbind(ebird_birdlife_taxonomy_mapping, birdlife_alopecoenas_stairi)
birdlife_alopecoenas_stairi
```
Alopecoenas ferrugineus
```{r}
birdlife_alopecoenas_ferrugineus = cbind(
  ebird_tax[ebird_tax$ebird_species_name == 'Pampusana ferruginea', c('ebird_id', 'ebird_species_name', 'ebird_common_name')],
  birdlife_tax[birdlife_tax$species_name == 'Alopecoenas ferrugineus', c('birdlife_id', 'species_name', 'birdlife_common_name')]
)
ebird_birdlife_taxonomy_mapping = rbind(ebird_birdlife_taxonomy_mapping, birdlife_alopecoenas_ferrugineus)
birdlife_alopecoenas_ferrugineus
```
Alopecoenas salamonis
```{r}
birdlife_alopecoenas_salamonis = cbind(
  ebird_tax[ebird_tax$ebird_species_name == 'Pampusana salamonis', c('ebird_id', 'ebird_species_name', 'ebird_common_name')],
  birdlife_tax[birdlife_tax$species_name == 'Alopecoenas salamonis', c('birdlife_id', 'species_name', 'birdlife_common_name')]
)
ebird_birdlife_taxonomy_mapping = rbind(ebird_birdlife_taxonomy_mapping, birdlife_alopecoenas_salamonis)
birdlife_alopecoenas_salamonis
```
Otidiphaps aruensis

* https://avibase.bsc-eoc.org/species.jsp?lang=EN&avibaseid=F197D25F1AB50C3B
* https://ebird.org/species/phepig1/

```{r}
birdlife_otidiphaps_aruensis = cbind(
  ebird_tax[ebird_tax$ebird_species_name == 'Otidiphaps nobilis aruensis', c('ebird_id', 'ebird_species_name', 'ebird_common_name')],
  birdlife_tax[birdlife_tax$species_name == 'Otidiphaps aruensis', c('birdlife_id', 'species_name', 'birdlife_common_name')]
)
ebird_birdlife_taxonomy_mapping = rbind(ebird_birdlife_taxonomy_mapping, birdlife_otidiphaps_aruensis)
birdlife_otidiphaps_aruensis
```

Otidiphaps cervicalis
```{r}
birdlife_otidiphaps_cervicalis = cbind(
  ebird_tax[ebird_tax$ebird_species_name == 'Otidiphaps nobilis cervicalis', c('ebird_id', 'ebird_species_name', 'ebird_common_name')],
  birdlife_tax[birdlife_tax$species_name == 'Otidiphaps cervicalis', c('birdlife_id', 'species_name', 'birdlife_common_name')]
)
ebird_birdlife_taxonomy_mapping = rbind(ebird_birdlife_taxonomy_mapping, birdlife_otidiphaps_cervicalis)
birdlife_otidiphaps_cervicalis
```

Otidiphaps insularis
```{r}
birdlife_otidiphaps_insularis = cbind(
  ebird_tax[ebird_tax$ebird_species_name == 'Otidiphaps nobilis insularis', c('ebird_id', 'ebird_species_name', 'ebird_common_name')],
  birdlife_tax[birdlife_tax$species_name == 'Otidiphaps insularis', c('birdlife_id', 'species_name', 'birdlife_common_name')]
)
ebird_birdlife_taxonomy_mapping = rbind(ebird_birdlife_taxonomy_mapping, birdlife_otidiphaps_insularis)
birdlife_otidiphaps_insularis
```

Phapitreron nigrorum
```{r}
birdlife_phapitreron_nigrorum = cbind(
  ebird_tax[ebird_tax$ebird_species_name == 'Phapitreron leucotis nigrorum', c('ebird_id', 'ebird_species_name', 'ebird_common_name')],
  birdlife_tax[birdlife_tax$species_name == 'Phapitreron nigrorum', c('birdlife_id', 'species_name', 'birdlife_common_name')]
)
ebird_birdlife_taxonomy_mapping = rbind(ebird_birdlife_taxonomy_mapping, birdlife_phapitreron_nigrorum)
birdlife_phapitreron_nigrorum
```
Phapitreron brevirostris
```{r}
birdlife_phapitreron_brevirostris = cbind(
  ebird_tax[ebird_tax$ebird_species_name == 'Phapitreron leucotis brevirostris/occipitalis', c('ebird_id', 'ebird_species_name', 'ebird_common_name')],
  birdlife_tax[birdlife_tax$species_name == 'Phapitreron brevirostris', c('birdlife_id', 'species_name', 'birdlife_common_name')]
)
ebird_birdlife_taxonomy_mapping = rbind(ebird_birdlife_taxonomy_mapping, birdlife_phapitreron_brevirostris)
birdlife_phapitreron_brevirostris
```
Phapitreron maculipectus
```{r}
birdlife_phapitreron_maculipectus = cbind(
  ebird_tax[ebird_tax$ebird_species_name == 'Phapitreron amethystinus maculipectus', c('ebird_id', 'ebird_species_name', 'ebird_common_name')],
  birdlife_tax[birdlife_tax$species_name == 'Phapitreron maculipectus', c('birdlife_id', 'species_name', 'birdlife_common_name')]
)
ebird_birdlife_taxonomy_mapping = rbind(ebird_birdlife_taxonomy_mapping, birdlife_phapitreron_maculipectus)
birdlife_phapitreron_maculipectus
```
Phapitreron frontalis
```{r}
birdlife_phapitreron_frontalis = cbind(
  ebird_tax[ebird_tax$ebird_species_name == 'Phapitreron amethystinus frontalis', c('ebird_id', 'ebird_species_name', 'ebird_common_name')],
  birdlife_tax[birdlife_tax$species_name == 'Phapitreron frontalis', c('birdlife_id', 'species_name', 'birdlife_common_name')]
)
ebird_birdlife_taxonomy_mapping = rbind(ebird_birdlife_taxonomy_mapping, birdlife_phapitreron_frontalis)
birdlife_phapitreron_frontalis
```
Treron delalandii

* https://avibase.bsc-eoc.org/search.jsp?qstr=Treron+permagnus

```{r}
birdlife_treron_delalandii = cbind(
  ebird_tax[ebird_tax$ebird_species_name == 'Treron calvus delalandii/granti', c('ebird_id', 'ebird_species_name', 'ebird_common_name')],
  birdlife_tax[birdlife_tax$species_name == 'Treron delalandii', c('birdlife_id', 'species_name', 'birdlife_common_name')]
)
ebird_birdlife_taxonomy_mapping = rbind(ebird_birdlife_taxonomy_mapping, birdlife_treron_delalandii)
birdlife_treron_delalandii
```
Treron permagnus

* https://avibase.bsc-eoc.org/species.jsp?lang=EN&avibaseid=1EE907AC088D0B85

```{r}
birdlife_treron_permagnus = cbind(
  ebird_tax[ebird_tax$ebird_species_name == 'Treron formosae permagnus/medioximus', c('ebird_id', 'ebird_species_name', 'ebird_common_name')],
  birdlife_tax[birdlife_tax$species_name == 'Treron permagnus', c('birdlife_id', 'species_name', 'birdlife_common_name')]
)
ebird_birdlife_taxonomy_mapping = rbind(ebird_birdlife_taxonomy_mapping, birdlife_treron_permagnus)
birdlife_treron_permagnus
```
Ducula obiensis

* https://avibase.bsc-eoc.org/species.jsp?lang=EN&avibaseid=AAC237408FEB8125

```{r}
birdlife_ducula_obiensis = cbind(
  ebird_tax[ebird_tax$ebird_species_name == 'Ducula basilica obiensis', c('ebird_id', 'ebird_species_name', 'ebird_common_name')],
  birdlife_tax[birdlife_tax$species_name == 'Ducula obiensis', c('birdlife_id', 'species_name', 'birdlife_common_name')]
)
ebird_birdlife_taxonomy_mapping = rbind(ebird_birdlife_taxonomy_mapping, birdlife_ducula_obiensis)
birdlife_ducula_obiensis
```
Ducula salvadorii
```{r}
birdlife_ducula_salvadorii = cbind(
  ebird_tax[ebird_tax$ebird_species_name == 'Ducula pinon salvadorii', c('ebird_id', 'ebird_species_name', 'ebird_common_name')],
  birdlife_tax[birdlife_tax$species_name == 'Ducula salvadorii', c('birdlife_id', 'species_name', 'birdlife_common_name')]
)
ebird_birdlife_taxonomy_mapping = rbind(ebird_birdlife_taxonomy_mapping, birdlife_ducula_salvadorii)
birdlife_ducula_salvadorii
```
Ramphiculus epius
```{r}
birdlife_ramphiculus_epius = cbind(
  ebird_tax[ebird_tax$ebird_species_name == 'Ptilinopus epius', c('ebird_id', 'ebird_species_name', 'ebird_common_name')],
  birdlife_tax[birdlife_tax$species_name == 'Ramphiculus epius', c('birdlife_id', 'species_name', 'birdlife_common_name')]
)
ebird_birdlife_taxonomy_mapping = rbind(ebird_birdlife_taxonomy_mapping, birdlife_ramphiculus_epius)
birdlife_ramphiculus_epius
```
Ramphiculus subgularis	
```{r}
birdlife_ramphiculus_subgularis = cbind(
  ebird_tax[ebird_tax$ebird_species_name == 'Ptilinopus subgularis', c('ebird_id', 'ebird_species_name', 'ebird_common_name')],
  birdlife_tax[birdlife_tax$species_name == 'Ramphiculus subgularis', c('birdlife_id', 'species_name', 'birdlife_common_name')]
)
ebird_birdlife_taxonomy_mapping = rbind(ebird_birdlife_taxonomy_mapping, birdlife_ramphiculus_subgularis)
birdlife_ramphiculus_subgularis
```
Ramphiculus mangoliensis
```{r}
birdlife_ramphiculus_mangoliensis = cbind(
  ebird_tax[ebird_tax$ebird_species_name == 'Ptilinopus mangoliensis', c('ebird_id', 'ebird_species_name', 'ebird_common_name')],
  birdlife_tax[birdlife_tax$species_name == 'Ramphiculus mangoliensis', c('birdlife_id', 'species_name', 'birdlife_common_name')]
)
ebird_birdlife_taxonomy_mapping = rbind(ebird_birdlife_taxonomy_mapping, birdlife_ramphiculus_mangoliensis)
birdlife_ramphiculus_mangoliensis
```
Ramphiculus fischeri
```{r}
birdlife_ramphiculus_fischeri = cbind(
  ebird_tax[ebird_tax$ebird_species_name == 'Ptilinopus fischeri', c('ebird_id', 'ebird_species_name', 'ebird_common_name')],
  birdlife_tax[birdlife_tax$species_name == 'Ramphiculus fischeri', c('birdlife_id', 'species_name', 'birdlife_common_name')]
)
ebird_birdlife_taxonomy_mapping = rbind(ebird_birdlife_taxonomy_mapping, birdlife_ramphiculus_fischeri)
birdlife_ramphiculus_fischeri
```
Ramphiculus meridionalis

* https://avibase.bsc-eoc.org/species.jsp?lang=EN&avibaseid=E41C677F7619363F

```{r}
birdlife_ramphiculus_meridionalis = cbind(
  ebird_tax[ebird_tax$ebird_species_name == 'Ptilinopus fischeri meridionalis', c('ebird_id', 'ebird_species_name', 'ebird_common_name')],
  birdlife_tax[birdlife_tax$species_name == 'Ramphiculus meridionalis', c('birdlife_id', 'species_name', 'birdlife_common_name')]
)
ebird_birdlife_taxonomy_mapping = rbind(ebird_birdlife_taxonomy_mapping, birdlife_ramphiculus_meridionalis)
birdlife_ramphiculus_meridionalis
```
Ptilinopus temminckii

* https://avibase.bsc-eoc.org/species.jsp?lang=EN&avibaseid=722E8494A2E5BD3C

```{r}
birdlife_ptilinopus_temminckii = cbind(
  ebird_tax[ebird_tax$ebird_species_name == 'Ptilinopus superbus temminckii', c('ebird_id', 'ebird_species_name', 'ebird_common_name')],
  birdlife_tax[birdlife_tax$species_name == 'Ptilinopus temminckii', c('birdlife_id', 'species_name', 'birdlife_common_name')]
)
ebird_birdlife_taxonomy_mapping = rbind(ebird_birdlife_taxonomy_mapping, birdlife_ptilinopus_temminckii)
birdlife_ptilinopus_temminckii
```
Ptilinopus gestroi

* https://avibase.bsc-eoc.org/species.jsp?lang=EN&avibaseid=E0D24D45C31E80AB

```{r}
birdlife_ptilinopus_gestroi = cbind(
  ebird_tax[ebird_tax$ebird_species_name == 'Ptilinopus ornatus gestroi', c('ebird_id', 'ebird_species_name', 'ebird_common_name')],
  birdlife_tax[birdlife_tax$species_name == 'Ptilinopus gestroi', c('birdlife_id', 'species_name', 'birdlife_common_name')]
)
ebird_birdlife_taxonomy_mapping = rbind(ebird_birdlife_taxonomy_mapping, birdlife_ptilinopus_gestroi)
birdlife_ptilinopus_gestroi
```

Ptilinopus fasciatus

* https://avibase.bsc-eoc.org/species.jsp?lang=EN&avibaseid=9F3042D2364F20B7

```{r}
birdlife_ptilinopus_fasciatus = cbind(
  ebird_tax[ebird_tax$ebird_species_name == 'Ptilinopus porphyraceus fasciatus', c('ebird_id', 'ebird_species_name', 'ebird_common_name')],
  birdlife_tax[birdlife_tax$species_name == 'Ptilinopus fasciatus', c('birdlife_id', 'species_name', 'birdlife_common_name')]
)
ebird_birdlife_taxonomy_mapping = rbind(ebird_birdlife_taxonomy_mapping, birdlife_ptilinopus_fasciatus)
birdlife_ptilinopus_fasciatus
```

### eBird
Extinct eBird species

* Pampusana norfolkensis

What hasn't been mapped?
```{r}
ebird_tax[!(ebird_tax$ebird_species_name %in% ebird_birdlife_taxonomy_mapping$ebird_species_name),]
```
Macropygia doreya

* https://avibase.bsc-eoc.org/species.jsp?avibaseid=DF44EED5
* https://avibase.bsc-eoc.org/species.jsp?lang=EN&avibaseid=FD5160925CD583C1

```{r}
ebird_macropygia_doreya = cbind(
  ebird_tax[ebird_tax$species_name == 'Macropygia doreya', c('ebird_id', 'ebird_species_name', 'ebird_common_name')],
  birdlife_tax[birdlife_tax$species_name == 'Macropygia amboinensis', c('birdlife_id', 'species_name', 'birdlife_common_name')]
)
ebird_birdlife_taxonomy_mapping = rbind(ebird_birdlife_taxonomy_mapping, ebird_macropygia_doreya)
ebird_macropygia_doreya
```

Macropygia cinnamomea

* https://avibase.bsc-eoc.org/species.jsp?lang=EN&avibaseid=F30B6A4781D2FA10

```{r}
ebird_macropygia_cinnamomea = cbind(
  ebird_tax[ebird_tax$species_name == 'Macropygia cinnamomea', c('ebird_id', 'ebird_species_name', 'ebird_common_name')],
  birdlife_tax[birdlife_tax$species_name == 'Macropygia emiliana', c('birdlife_id', 'species_name', 'birdlife_common_name')]
)
ebird_birdlife_taxonomy_mapping = rbind(ebird_birdlife_taxonomy_mapping, ebird_macropygia_cinnamomea)
ebird_macropygia_cinnamomea
```
Macropygia modiglianii

* https://avibase.bsc-eoc.org/species.jsp?lang=EN&avibaseid=3A905A46&sec=summary&ssver=1

```{r}
ebird_macropygia_modiglianii = cbind(
  ebird_tax[ebird_tax$species_name == 'Macropygia modiglianii', c('ebird_id', 'ebird_species_name', 'ebird_common_name')],
  birdlife_tax[birdlife_tax$species_name == 'Macropygia emiliana', c('birdlife_id', 'species_name', 'birdlife_common_name')]
)
ebird_birdlife_taxonomy_mapping = rbind(ebird_birdlife_taxonomy_mapping, ebird_macropygia_modiglianii)
ebird_macropygia_modiglianii
```
Pampusana beccarii beccarii
```{r}
ebird_pampusana_beccarii_beccarii = cbind(
  ebird_tax[ebird_tax$ebird_species_name == 'Pampusana beccarii beccarii',c('ebird_id', 'ebird_species_name', 'ebird_common_name')],
  birdlife_tax[birdlife_tax$species_name == 'Alopecoenas beccarii', c('birdlife_id', 'species_name', 'birdlife_common_name')]
)
ebird_birdlife_taxonomy_mapping = rbind(ebird_birdlife_taxonomy_mapping, ebird_pampusana_beccarii_beccarii)
ebird_pampusana_beccarii_beccarii
```


Ptilinopus fischeri fischeri/centralis
```{r}
ebird_ptilinopus_fischeri = cbind(
  ebird_tax[ebird_tax$ebird_species_name == 'Ptilinopus fischeri fischeri/centralis', c('ebird_id', 'ebird_species_name', 'ebird_common_name')],
  birdlife_tax[birdlife_tax$species_name == 'Ramphiculus fischeri', c('birdlife_id', 'species_name', 'birdlife_common_name')]
)
ebird_birdlife_taxonomy_mapping = rbind(ebird_birdlife_taxonomy_mapping, ebird_ptilinopus_fischeri)
ebird_ptilinopus_fischeri
```

Ducula nicobarica

* https://avibase.bsc-eoc.org/species.jsp?lang=EN&avibaseid=2EB3A41049FE360A

```{r}
ebird_ducula_nicobarica = cbind(
  ebird_tax[ebird_tax$ebird_species_name == 'Ducula nicobarica', c('ebird_id', 'ebird_species_name', 'ebird_common_name')],
  birdlife_tax[birdlife_tax$species_name == 'Ducula aenea', c('birdlife_id', 'species_name', 'birdlife_common_name')]
)
ebird_birdlife_taxonomy_mapping = rbind(ebird_birdlife_taxonomy_mapping, ebird_ducula_nicobarica)
ebird_ducula_nicobarica
```
## Confirm all non-extinct species mapped
Species missing in Birdlife
```{r}
birdlife_tax[!(birdlife_tax$species_name %in% ebird_birdlife_taxonomy_mapping$species_name),]
```

Species missing in eBird
```{r}
ebird_tax[!(ebird_tax$ebird_species_name %in% ebird_birdlife_taxonomy_mapping$ebird_species_name),]
```
# Remove Extinct species
```{r}
ebird_birdlife_taxonomy_mapping = ebird_birdlife_taxonomy_mapping[!(ebird_birdlife_taxonomy_mapping$species_name %in% c(
  'Ectopistes migratorius', 'Columba thiriouxi', 'Nesoenas cicur', 'Raphus cucullatus', 'Alectroenas nitidissimus', 'Nesoenas rodericanus', 'Microgoura meeki', 'Caloenas maculata', 'Pezophaps solitaria', 'Alectroenas payandeei', 'Ptilinopus mercierii', 'Alopecoenas ferrugineus', 'Alopecoenas salamonis', 'Columba jouyi', 'Columba versicolor'
)),]
```

# Map to Jetz

```{r}
ebird_birdlife_taxonomy_mapping$jetz_species_name = str_replace(ebird_birdlife_taxonomy_mapping$species_name, " ", "_")
```

```{r}
jetz_phylo_tree <- read.tree(PHYLO_TREE)
```

Species with incorrect jetz mapping
```{r}
ebird_birdlife_taxonomy_mapping[!(ebird_birdlife_taxonomy_mapping$jetz_species_name %in% jetz_phylo_tree$tip.label),]
```

Fix mapping
```{r}
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Streptopelia dusumieri'] = 'Streptopelia_bitorquata'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Streptopelia xanthocycla'] = 'Streptopelia_decaocto'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Spilopelia chinensis'] = 'Stigmatopelia_chinensis'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Spilopelia senegalensis'] = 'Stigmatopelia_senegalensis'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Nesoenas picturatus'] = 'Nesoenas_picturata'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Macropygia macassariensis'] = 'Macropygia_magna'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Macropygia timorlaoensis'] = 'Macropygia_magna'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Turacoena sulaensis'] = 'Turacoena_manadensis'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Reinwardtoena reinwardti'] = 'Reinwardtoena_reinwardtsi'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Geotrygon purpurata'] = 'Geotrygon_saphirina'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Geotrygon leucometopia'] = 'Geotrygon_caniceps'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Leptotrygon veraguensis'] = 'Geotrygon_veraguensis'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Leptotila cassinii'] = 'Leptotila_cassini'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Zentrygon carrikeri'] = 'Geotrygon_lawrencii'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Zentrygon costaricensis'] = 'Geotrygon_costaricensis'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Zentrygon lawrencii'] = 'Geotrygon_lawrencii'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Zentrygon albifacies'] = 'Geotrygon_albifacies'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Zentrygon frenata'] = 'Geotrygon_frenata'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Zentrygon linearis'] = 'Geotrygon_linearis'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Zentrygon chiriquensis'] = 'Geotrygon_chiriquensis'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Zentrygon goldmani'] = 'Geotrygon_goldmani'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Paraclaravis mondetoura'] = 'Claravis_mondetoura'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Paraclaravis geoffroyi'] = 'Claravis_godefrida'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Goura sclaterii'] = 'Goura_scheepmakeri'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Chalcophaps longirostris'] = 'Chalcophaps_indica'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Treron phayrei'] = 'Treron_pompadora'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Treron affinis'] = 'Treron_pompadora'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Treron chloropterus'] = 'Treron_pompadora'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Treron axillaris'] = 'Treron_pompadora'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Treron aromaticus'] = 'Treron_pompadora'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Treron griveaudi'] = 'Treron_calvus'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Ducula oenothorax'] = 'Ducula_aenea'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Ducula neglecta'] = 'Ducula_perspicillata'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Ducula geelvinkiana'] = 'Ducula_myristicivora'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Ducula cuprea'] = 'Ducula_badia'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Alectroenas pulcherrimus'] = 'Alectroenas_pulcherrima'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Ptilinopus nainus'] = 'Ptilinopus_naina'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Ptilinopus alligator'] = 'Ptilinopus_cinctus'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Ptilinopus speciosus'] = 'Ptilinopus_solomonensis'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Ptilinopus ponapensis'] = 'Ptilinopus_porphyraceus'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Ptilinopus hernsheimi'] = 'Ptilinopus_porphyraceus'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Ptilinopus greyi'] = 'Ptilinopus_greyii'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Ptilinopus chrysogaster'] = 'Ptilinopus_purpuratus'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Hemiphaga chathamensis'] = 'Hemiphaga_novaeseelandiae'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Gymnophaps stalkeri'] = 'Gymnophaps_mada'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Megaloprepia magnifica'] = 'Ptilinopus_magnificus'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Megaloprepia formosa'] = 'Ptilinopus_bernsteinii'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Ramphiculus merrilli'] = 'Ptilinopus_merrilli'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Ramphiculus marchei'] = 'Ptilinopus_marchei'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Ramphiculus leclancheri'] = 'Ptilinopus_leclancheri'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Ramphiculus jambu'] = 'Ptilinopus_jambu'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Ramphiculus occipitalis'] = 'Ptilinopus_occipitalis'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Chrysoena victor'] = 'Ptilinopus_victor'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Chrysoena luteovirens'] = 'Ptilinopus_luteovirens'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Chrysoena viridis'] = 'Ptilinopus_viridis'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Spilopelia suratensis'] = 'Stigmatopelia_chinensis'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Patagioenas albipennis'] = 'Patagioenas_maculosa'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Patagioenas albilinea'] = 'Patagioenas_fasciata'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Alopecoenas hoedtii'] = 'Gallicolumba_hoedtii'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Alopecoenas jobiensis'] = 'Gallicolumba_jobiensis'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Alopecoenas kubaryi'] = 'Gallicolumba_kubaryi'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Alopecoenas xanthonurus'] = 'Gallicolumba_xanthonura'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Alopecoenas erythropterus'] = 'Gallicolumba_erythroptera'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Alopecoenas rubescens'] = 'Gallicolumba_rubescens'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Alopecoenas beccarii'] = 'Gallicolumba_beccarii'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Alopecoenas johannae'] = 'Gallicolumba_beccarii'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Alopecoenas canifrons'] = 'Gallicolumba_canifrons'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Alopecoenas sanctaecrucis'] = 'Gallicolumba_sanctaecrucis'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Alopecoenas stairi'] = 'Gallicolumba_stairi'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Otidiphaps aruensis'] = 'Otidiphaps_nobilis'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Otidiphaps cervicalis'] = 'Otidiphaps_nobilis'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Otidiphaps insularis'] = 'Otidiphaps_nobilis'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Phapitreron nigrorum'] = 'Phapitreron_leucotis'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Phapitreron brevirostris'] = 'Phapitreron_leucotis'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Phapitreron maculipectus'] = 'Phapitreron_amethystinus'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Phapitreron frontalis'] = 'Phapitreron_amethystinus'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Treron delalandii'] = 'Treron_calvus'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Treron permagnus'] = 'Treron_formosae'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Ducula obiensis'] = 'Ducula_basilica'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Ducula salvadorii'] = 'Ducula_pinon'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Ramphiculus epius'] = 'Ptilinopus_subgularis'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Ramphiculus subgularis'] = 'Ptilinopus_subgularis'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Ramphiculus mangoliensis'] = 'Ptilinopus_subgularis'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Ramphiculus fischeri'] = 'Ptilinopus_fischeri'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Ramphiculus meridionalis'] = 'Ptilinopus_fischeri'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Ptilinopus temminckii'] = 'Ptilinopus_superbus'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Ptilinopus gestroi'] = 'Ptilinopus_ornatus'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Ptilinopus fasciatus'] = 'Ptilinopus_porphyraceus'
ebird_birdlife_taxonomy_mapping$jetz_species_name[ebird_birdlife_taxonomy_mapping$species_name == 'Alopecoenas beccarii'] = 'Gallicolumba_beccarii'
```

Check all species now mapped
```{r}
ebird_birdlife_taxonomy_mapping[!ebird_birdlife_taxonomy_mapping$jetz_species_name %in% jetz_phylo_tree$tip.label,]
```

## Store Mapping file
```{r}
write_csv(ebird_birdlife_taxonomy_mapping, filename(TAXONOMY_OUTPUT_DIR, 'taxonomy_mapping.csv'))
```

## Prune Phylogeny and store
```{r}
selected_species <- ebird_birdlife_taxonomy_mapping$jetz_species_name
pruned_tree <- ladderize(drop.tip(jetz_phylo_tree, setdiff(jetz_phylo_tree$tip.label, selected_species)))
write.tree(pruned_tree, filename(TAXONOMY_OUTPUT_DIR, 'phylogeny.tre'))
```
